From 911982cbfdc96e9e20afd3096b71caa09533e5a0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hubert=20Figui=C3=A8re?= <hub@figuiere.net>
Date: Sat, 1 Nov 2025 10:13:06 -0400
Subject: [PATCH 2/3] Fix build with recent gcc
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Added missing includes
Fix mismatch prototypes

Signed-off-by: Hubert Figui√®re <hub@figuiere.net>
---
 clients/synth/lash.c | 2 ++
 lashd/client.c       | 2 +-
 lashd/server_event.h | 2 +-
 liblash/lash.c       | 1 +
 4 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/clients/synth/lash.c b/clients/synth/lash.c
index 03717ae..1c5d321 100644
--- a/clients/synth/lash.c
+++ b/clients/synth/lash.c
@@ -23,6 +23,8 @@
 #include "config.h"
 
 #include <unistd.h>
+#include <string.h>
+#include <stdio.h>
 
 #include <lash/lash.h>
 
diff --git a/lashd/client.c b/lashd/client.c
index 5adfee3..ab4efa1 100644
--- a/lashd/client.c
+++ b/lashd/client.c
@@ -26,7 +26,7 @@
 #include "alsa_patch.h"
 
 client_t *
-client_new(lash_connect_params_t * params)
+client_new()
 {
 	client_t *client;
 
diff --git a/lashd/server_event.h b/lashd/server_event.h
index b33d56d..31f108b 100644
--- a/lashd/server_event.h
+++ b/lashd/server_event.h
@@ -51,7 +51,7 @@ struct _server_event
 };
 
 server_event_t * server_event_new ();
-void             server_event_destroy ();
+void             server_event_destroy (server_event_t * event);
 
 void server_event_set_type           (server_event_t * event, enum Server_Event_Type type);
 void server_event_set_conn_id        (server_event_t * event, unsigned long id);
diff --git a/liblash/lash.c b/liblash/lash.c
index b47251d..f2a5095 100644
--- a/liblash/lash.c
+++ b/liblash/lash.c
@@ -22,6 +22,7 @@
 #include <string.h>
 #include <strings.h>
 #include <pthread.h>
+#include <sys/resource.h>
 #include <sys/types.h>
 #include <sys/wait.h>
 #include <sys/socket.h>
-- 
2.51.0

