From 035507ee947e3ffa0bea7d222fc3d5200e8aa9db Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hubert=20Figui=C3=A8re?= <hub@figuiere.net>
Date: Sat, 1 Nov 2025 10:13:56 -0400
Subject: [PATCH 3/3] Fix linking
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Fix pkg-config for lib uuid (static)

Signed-off-by: Hubert Figui√®re <hub@figuiere.net>
---
 clients/control/Makefile.am | 2 +-
 clients/control/Makefile.in | 2 +-
 clients/panel/Makefile.am   | 2 +-
 clients/panel/Makefile.in   | 2 +-
 clients/synth/Makefile.am   | 2 +-
 clients/synth/Makefile.in   | 2 +-
 lash-1.0.pc.in              | 3 +--
 lashd/Makefile.am           | 1 +
 lashd/Makefile.in           | 1 +
 9 files changed, 9 insertions(+), 8 deletions(-)

diff --git a/clients/control/Makefile.am b/clients/control/Makefile.am
index d3eaab2..db126f8 100644
--- a/clients/control/Makefile.am
+++ b/clients/control/Makefile.am
@@ -18,6 +18,6 @@ lash_control_CFLAGS = $(LASH_CFLAGS)
 
 lash_control_LDADD = \
 	$(top_builddir)/liblash/liblash.la \
-	$(LASH_LIBS) @READLINE_LIBS@
+	$(LASH_LIBS) @READLINE_LIBS@ -luuid
 
 endif
diff --git a/clients/control/Makefile.in b/clients/control/Makefile.in
index a21e226..d2f1711 100644
--- a/clients/control/Makefile.in
+++ b/clients/control/Makefile.in
@@ -236,7 +236,7 @@ AM_CPPFLAGS = -I$(top_srcdir)
 @HAVE_READLINE_TRUE@lash_control_CFLAGS = $(LASH_CFLAGS)
 @HAVE_READLINE_TRUE@lash_control_LDADD = \
 @HAVE_READLINE_TRUE@	$(top_builddir)/liblash/liblash.la \
-@HAVE_READLINE_TRUE@	$(LASH_LIBS) @READLINE_LIBS@
+@HAVE_READLINE_TRUE@	$(LASH_LIBS) @READLINE_LIBS@ -luuid
 
 all: all-am
 
diff --git a/clients/panel/Makefile.am b/clients/panel/Makefile.am
index 2016aa7..5b64178 100644
--- a/clients/panel/Makefile.am
+++ b/clients/panel/Makefile.am
@@ -13,7 +13,7 @@ lash_panel_CFLAGS = \
 
 lash_panel_LDADD = \
 	$(top_builddir)/liblash/liblash.la \
-	$(GTK2_LIBS)
+	$(GTK2_LIBS) -luuid
 
 if HAVE_GTK2
   bin_PROGRAMS = lash_panel
diff --git a/clients/panel/Makefile.in b/clients/panel/Makefile.in
index 9834e38..94d4aaf 100644
--- a/clients/panel/Makefile.in
+++ b/clients/panel/Makefile.in
@@ -230,7 +230,7 @@ lash_panel_CFLAGS = \
 
 lash_panel_LDADD = \
 	$(top_builddir)/liblash/liblash.la \
-	$(GTK2_LIBS)
+	$(GTK2_LIBS) -luuid
 
 all: all-am
 
diff --git a/clients/synth/Makefile.am b/clients/synth/Makefile.am
index 59437ce..bbade5b 100644
--- a/clients/synth/Makefile.am
+++ b/clients/synth/Makefile.am
@@ -20,4 +20,4 @@ lash_synth_LDADD = \
 	$(JACK_LIBS) \
 	$(ALSA_LIBS) \
 	$(GTK2_LIBS) \
-	-lpthread
+	-lpthread -lm
diff --git a/clients/synth/Makefile.in b/clients/synth/Makefile.in
index 6a433c5..a7b8a79 100644
--- a/clients/synth/Makefile.in
+++ b/clients/synth/Makefile.in
@@ -238,7 +238,7 @@ lash_synth_LDADD = \
 	$(JACK_LIBS) \
 	$(ALSA_LIBS) \
 	$(GTK2_LIBS) \
-	-lpthread
+	-lpthread -lm
 
 all: all-am
 
diff --git a/lash-1.0.pc.in b/lash-1.0.pc.in
index 32bd49c..1dab08d 100644
--- a/lash-1.0.pc.in
+++ b/lash-1.0.pc.in
@@ -7,6 +7,5 @@ Name: LASH
 Description: Audio session management
 Requires: @PC_REQUIRES@
 Version: @PACKAGE_VERSION@
-Libs: -llash
-Libs.static: -lpthread -luuid
+Libs: -llash -lpthread -luuid
 Cflags: -I${includedir}/lash-1.0
diff --git a/lashd/Makefile.am b/lashd/Makefile.am
index 481fb45..5260497 100644
--- a/lashd/Makefile.am
+++ b/lashd/Makefile.am
@@ -32,6 +32,7 @@ lashd_LDADD = \
 	$(ALSA_LIBS) \
 	$(XML2_LIBS) \
 	$(UUID_LIBS) \
+	-lpthread \
 	$(top_builddir)/liblash/liblash.la
 
 lashd_CFLAGS = \
diff --git a/lashd/Makefile.in b/lashd/Makefile.in
index a50e5c7..1bb1ff1 100644
--- a/lashd/Makefile.in
+++ b/lashd/Makefile.in
@@ -262,6 +262,7 @@ lashd_LDADD = \
 	$(ALSA_LIBS) \
 	$(XML2_LIBS) \
 	$(UUID_LIBS) \
+	-lpthread \
 	$(top_builddir)/liblash/liblash.la
 
 lashd_CFLAGS = \
-- 
2.51.0

